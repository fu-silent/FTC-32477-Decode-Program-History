# 📦 TeleOp_All v2.2 - FTC32477 控制程序（最新版）

> **本程序用于 FTC Decode 赛季（2025-2026）**  
> **修改前请阅读项目根目录的 `修改指南.md`**

## ⚡ 30秒快速开始

### 推荐方案：使用单文件版本

```bash
1. 打开 TeleOp_All_2_2.java
2. 修改硬件名称（见下表）
3. 编译并上传到 FTC 控制器
4. 完成！✅
```

## 🎯 v2.2 特点

### 相比 v2.1 的改进

| 特性 | v2.1 | v2.2 | 说明 |
|------|------|------|------|
| 底盘模式 | 仅线性 | **线性/非线性切换** | **按 Y 键切换，低速更精准** |
| 交互反馈 | 无 | **手柄震动** | **设置转速时手柄震动提示** |
| 发射逻辑 | 扳机控制 | **扳机控制+震动** | **更直观的交互体验** |
| 转速档位 | 4个 | 4个 | 保持优化后的档位 |
| 独立控制 | 是 | 是 | 保持独立控制逻辑 |

## 📂 文件说明

### 核心程序

| 文件 | 用途 | 推荐 |
|------|------|------|
| `TeleOp_All_2_2.java` | 单文件版，所有功能集成 | ⭐ 竞赛 |
| `TeleOp_2_2.java` + 7模块 | 多文件版，清晰易扩展 | 📚 学习 |

### 文档导航

- **README.md** - 快速开始（本文件，5分钟）
- **综合使用指南.md** - 配置和常见问题（15分钟）
- **功能对比文档.md** - 版本改进对比（10分钟）

## 🎮 核心功能

- **独立控制** - 拾取、装填、发射三个系统完全分离
- **双模式底盘** - 可切换线性（快速）和非线性（精准）移动模式
- **手柄震动** - 关键操作（如切换档位）提供触觉反馈
- **统一精度** - 所有转速档位精度统一 ±200 RPM
- **双发射电机** - 两个电机独立同步驱动
- **IMU 导航** - 陀螺仪自动转向

## ⚙️ 基本配置

### 修改硬件名称

在 `Constants` 类或 `RobotConstants_2_2.java` 中：

```java
// 底盘
CHASSIS_MOTOR_FRONT_LEFT_NAME = "lf";      // 改成你的名称
CHASSIS_MOTOR_FRONT_RIGHT_NAME = "rf";
CHASSIS_MOTOR_BACK_LEFT_NAME = "lb";
CHASSIS_MOTOR_BACK_RIGHT_NAME = "rb";

// 子系统
SUBSYSTEM_INTAKE_MOTOR_NAME = "intake";
SUBSYSTEM_LOAD_MOTOR_NAME = "load";
SUBSYSTEM_SHOOTER1_MOTOR_NAME = "s1";      // 第一个发射电机
SUBSYSTEM_SHOOTER2_MOTOR_NAME = "s2";      // 第二个发射电机
IMU_SENSOR_NAME = "imu";                   // IMU 传感器
```

### 修改转速档位

```java
SHOOTER_RPM_LONG_RANGE = 3200;      // 超远（D-Pad 右）
SHOOTER_RPM_TRIANGLE_SIDE = 1900;   // 腰部（D-Pad 左）
SHOOTER_RPM_TRIANGLE_BASE = 1650;   // 底部（D-Pad 下）
SHOOTER_RPM_TRIANGLE_TOP = 2400;    // 顶点（D-Pad 上）
```

## 🎮 完整按键映射

| 功能 | 按键 | 说明 |
|------|------|------|
| **前后移动** | 左摇杆 Y轴 | 向上前进、向下后退 |
| **左右平移** | 左摇杆 X轴 | 向左平移、向右平移 |
| **原地旋转** | 右摇杆 X轴 | 灵敏度 80%（可调） |
| **模式切换** | Y 键 | **切换线性/非线性底盘模式** |
| **拾取进** | A 键 | 拾取正向 |
| **拾取退** | B 键 | 拾取反向 + 装填反向 |
| **停止** | X 键 | 停止所有 |
| **超远档** | D-Pad 右 | 3200 RPM (**伴随震动**) |
| **腰部档** | D-Pad 左 | 1900 RPM (**伴随震动**) |
| **底部档** | D-Pad 下 | 1650 RPM (**伴随震动**) |
| **顶点档** | D-Pad 上 | 2400 RPM (**伴随震动**) |
| **发射/停止** | 右扳机 (RT) | **按住发射，松开停止** |
| **自动转向** | 右肩键 | 自动向右转 45° |

## 🔍 版本选择

- **竞赛** → 使用 `TeleOp_All_2_2.java`（单文件、快速）
- **学习** → 使用多文件版本（清晰、易扩展）

## 🚀 部署流程

1. **复制代码** - 复制对应版本的 Java 文件
2. **修改硬件** - 改硬件名称到你的配置
3. **修改参数** - 根据需要调整转速档位和精度
4. **编译上传** - Build → Run
5. **IMU 校准** - 上传后让机器人平放，自动校准 IMU
6. **测试** - 验证各功能正常
7. **部署** - 祝竞赛顺利！

## 📊 性能对比

| 指标 | v2.0 | v2.1 | v2.2 |
|------|------|------|------|
| 发射电机 | 2 | 2 | 2 |
| 底盘模式 | 1 | 1 | **2 (可切换)** |
| 触觉反馈 | 无 | 无 | **有 (震动)** |
| 系统控制 | 联动 | 独立 | **独立** |
| 按键风格 | 混合 | v1.0 | **v1.0** |

## 📖 快速导航

### 需要快速参考？
→ 查看本文件的表格和代码块（3分钟）

### 需要配置和调试？
→ 打开 `综合使用指南.md`（15分钟）

### 需要理解改进？
→ 打开 `功能对比文档.md`（10分钟）

### 遇到问题？
→ 打开 `综合使用指南.md` → 常见问题部分

## 📝 版本历史

| 版本 | 改进 |
|------|------|
| v1.0 | 基础功能：底盘、拾取、装填、单发射 |
| v2.0 | 新增：双发射、IMU、自动转向、多档位 |
| v2.1 | 优化：独立控制、统一精度、v1.0 按键 |
| v2.2 | 增强：手柄震动、非线性底盘模式、发射逻辑优化 |

---

📅 更新：2025-12-05 | ⭐ 版本：v2.2 | ✅ 状态：完成可用
