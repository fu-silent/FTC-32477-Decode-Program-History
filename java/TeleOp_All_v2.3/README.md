# 📦 TeleOp_All v2.3 - FTC32477 控制程序（最新版）

> **本程序用于 FTC Decode 赛季（2025-2026）**  
> **修改前请阅读项目根目录的 `修改指南.md`**

## ⚡ 30秒快速开始

### 推荐方案：使用单文件版本

```bash
1. 打开 TeleOp_All_2_3.java
2. 修改硬件名称（见下表）
3. 编译并上传到 FTC 控制器
4. 完成！✅
```

## 🎯 v2.3 特点

### 相比 v2.2 的改进

| 特性 | v2.2 | v2.3 | 说明 |
|------|------|------|------|
| 驱动模式 | 机器人坐标系 | **无头模式 (Field-Centric)** | **按 X 键切换，方向与场地绝对一致** |
| 航向校准 | 无 | **IMU 重置** | **按 Back 键重置车头朝向** |
| 转速优化 | 高转速配置 | **中低转速配置** | **针对新发射结构优化** |
| 底盘模式 | 线性/非线性 | **保留双模式** | 按 Y 键切换，低速更精准 |
| 交互反馈 | 震动 | **震动** | 关键操作（模式切换、档位）震动提示 |

## 📂 文件说明

### 核心程序

| 文件 | 用途 | 推荐 |
|------|------|------|
| `TeleOp_All_2_3.java` | 单文件版，集成无头模式 | ⭐ 竞赛 |
| `TeleOp_All_2_2.java` | 旧版本备份 | 备用 |

### 文档导航

- **README.md** - 快速开始（本文件，5分钟）
- **综合使用指南.md** - 配置和常见问题（15分钟）
- **功能对比文档.md** - 版本改进对比（10分钟）

## 🎮 核心功能

- **无头模式 (Field-Centric)** - 无论车头朝向何处，推杆方向即为移动方向（默认开启）
- **独立控制** - 拾取、装填、发射三个系统完全分离
- **双模式底盘** - 可切换线性（快速）和非线性（精准）移动模式
- **手柄震动** - 关键操作（如切换档位、模式切换）提供触觉反馈
- **双发射电机** - 两个电机独立同步驱动
- **IMU 导航** - 陀螺仪自动转向与航向保持

## ⚙️ 基本配置

### 修改硬件名称

在 `Constants` 类或代码开头：

```java
// 底盘
CHASSIS_MOTOR_FRONT_LEFT_NAME = "lf";      // 改成你的名称
CHASSIS_MOTOR_FRONT_RIGHT_NAME = "rf";
CHASSIS_MOTOR_BACK_LEFT_NAME = "lb";
CHASSIS_MOTOR_BACK_RIGHT_NAME = "rb";

// 子系统
SUBSYSTEM_INTAKE_MOTOR_NAME = "intake";
SUBSYSTEM_LOAD_MOTOR_NAME = "load";
SUBSYSTEM_SHOOTER1_MOTOR_NAME = "s1";      // 第一个发射电机
SUBSYSTEM_SHOOTER2_MOTOR_NAME = "s2";      // 第二个发射电机
IMU_SENSOR_NAME = "imu";                   // IMU 传感器
```

### 修改转速档位 (v2.3 调整)

```java
SHOOTER_RPM_LONG_RANGE = 1900;      // 超远（D-Pad 右）
SHOOTER_RPM_TRIANGLE_SIDE = 1400;   // 腰部（D-Pad 左）
SHOOTER_RPM_TRIANGLE_BASE = 1200;   // 底部（D-Pad 下）
SHOOTER_RPM_TRIANGLE_TOP = 1650;    // 顶点（D-Pad 上）
```

## 🎮 完整按键映射

| 功能 | 按键 | 说明 |
|------|------|------|
| **前后移动** | 左摇杆 Y轴 | 向上前进、向下后退 (无头模式下相对于场地) |
| **左右平移** | 左摇杆 X轴 | 向左平移、向右平移 (无头模式下相对于场地) |
| **原地旋转** | 右摇杆 X轴 | 改变车头朝向 |
| **无头切换** | X 键 | **切换 无头(Field)/有头(Robot) 模式** |
| **驱动切换** | Y 键 | **切换 线性/非线性 底盘模式** |
| **重置航向** | Back/Options | **重置 IMU 0度方向 (无头模式校准)** |
| **拾取进** | A 键 | 拾取正向 |
| **拾取退** | B 键 | 拾取反向 |
| **装填进** | 左扳机 (LT) | 装填正向 |
| **装填退** | 左肩键 (LB) | 装填反向 |
| **超远档** | D-Pad 右 | 1900 RPM (**伴随震动**) |
| **腰部档** | D-Pad 左 | 1400 RPM (**伴随震动**) |
| **底部档** | D-Pad 下 | 1200 RPM (**伴随震动**) |
| **顶点档** | D-Pad 上 | 1650 RPM (**伴随震动**) |
| **发射/停止** | 右扳机 (RT) | **按住发射，松开停止** |
| **自动转向** | 右肩键 (RB) | 自动向右转 45° |

## 🔍 版本选择

- **竞赛** → 使用 `TeleOp_All_2_3.java`（无头模式、功能最全）
- **学习** → 可参考旧版本多文件架构

## 🚀 部署流程

1. **复制代码** - 复制 `TeleOp_All_2_3.java` 文件
2. **修改硬件** - 改硬件名称到你的配置
3. **修改参数** - 根据需要调整转速档位和精度
4. **编译上传** - Build → Run
5. **IMU 校准** - 上传后让机器人平放，初始化时自动校准 IMU
6. **无头校准** - 若方向不准，将车头摆正（朝向场地前方）并按 **Back** 键重置
7. **部署** - 祝竞赛顺利！

## 📊 性能对比

| 指标 | v2.1 | v2.2 | v2.3 |
|------|------|------|------|
| 驱动模式 | 仅有头 | 仅有头 | **无头/有头切换** |
| IMU 功能 | 自动转向 | 自动转向 | **自动转向 + 航向重置** |
| 触觉反馈 | 无 | 有 | **有 (增强)** |
| 转速配置 | 旧版 | 高速 | **优化版** |

## 📖 快速导航

### 需要快速参考？
→ 查看本文件的表格和代码块（3分钟）

### 需要配置和调试？
→ 打开 `综合使用指南.md`（15分钟）

### 遇到问题？
→ 检查 Driver Station 遥测数据，或尝试重置 IMU（Back 键）

## 📝 版本历史

| 版本 | 改进 |
|------|------|
| v1.0 | 基础功能：底盘、拾取、装填、单发射 |
| v2.0 | 新增：双发射、IMU、自动转向、多档位 |
| v2.1 | 优化：独立控制、统一精度、v1.0 按键 |
| v2.2 | 增强：手柄震动、非线性底盘模式、发射逻辑优化 |
| v2.3 | **重大更新：无头模式 (Field-Centric)、IMU 重置、转速参数调整** |

---

📅 更新：2025-12-12 | ⭐ 版本：v2.3 | ✅ 状态：完成可用
